(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{35:function(e,t,a){e.exports=a(59)},43:function(e,t,a){},45:function(e,t){},46:function(e,t,a){},47:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),s=a.n(c),o=a(13),i=a(26),l=a(3),u=(a(43),a(8)),m=a(9),d=a(11),p=a(10),h=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es "))}}]),a}(n.Component),b=a(23),f=a(21),v=a.n(f),g=a(15),E=(a(46),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.email,n=e.score,c=e.timer;return r.a.createElement("header",null,r.a.createElement("div",{className:"header-player"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"img-gravatar",alt:"avatar",src:"https://www.gravatar.com/avatar/".concat(v()(a).toString())}),r.a.createElement("div",{className:"player-info"},r.a.createElement("h1",{"data-testid":"header-player-name",className:"name"},"Player: ".concat(t)),r.a.createElement("h2",{"data-testid":"header-score",className:"score"},"Score: ".concat(n)))),c>0&&r.a.createElement("p",{className:"timer"},c),r.a.createElement("div",{className:"header-logo"},r.a.createElement("img",{src:"./neon.svg",alt:""})))}}]),a}(n.Component));E.defaultProps={name:"",email:"",score:0,timer:0};var k=Object(o.b)((function(e){return{name:e.player.name,email:e.player.gravatarEmail,score:e.player.score}}),null)(E),y=(a(47),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleRouteBtnClick=function(){e.props.history.push("/")},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.player,t=e.name,a=e.score,n=e.gravatarEmail;if(t){var r={name:t,score:a,picture:"https://www.gravatar.com/avatar/".concat(v()(n).toString())},c=JSON.parse(localStorage.getItem("ranking"))||[];localStorage.setItem("ranking",JSON.stringify([].concat(Object(b.a)(c),[r])))}}},{key:"render",value:function(){var e=this.props,t=e.assertion,a=e.score,n=e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement("div",{className:"feedback-container"},t>=3?r.a.createElement("p",{"data-testid":"feedback-text",className:"feedback-text"},"Well Done!"):r.a.createElement("p",{"data-testid":"feedback-text",className:"feedback-text"},"Could be better..."),r.a.createElement("p",{"data-testid":"feedback-total-score",className:"feedback-data"},"Score: ".concat(a)),r.a.createElement("p",{"data-testid":"feedback-total-question",className:"feedback-data"},"Assertions: ".concat(t)),r.a.createElement("div",{className:"feedback-btns"},r.a.createElement("button",{"data-testid":"btn-play-again",className:"play-again-btn",type:"button",onClick:this.handleRouteBtnClick},r.a.createElement(g.b,null),"Play Again",r.a.createElement("span",null)),r.a.createElement("button",{"data-testid":"btn-ranking",className:"ranking-btn",type:"button",onClick:function(){return n.push("/ranking")}},r.a.createElement(g.a,null),"Ranking",r.a.createElement("span",null)))))}}]),a}(n.Component)),w=Object(o.b)((function(e){return{assertion:e.player.assertions,player:e.player,score:e.player.score}}))(y),O=a(12),N=a.n(O),j=a(14),S=a(16),x=a(27),A=a.n(x),C=function(){return function(){var e=Object(S.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t({type:"GET_TOKEN",token:n.token}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:"FAIL",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},D=function(e,t){return{type:"SET_PLAYER_DATA",name:e,gravatarEmail:t}},T=(a(50),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).countDown=0,e.timeOut=0,e.handleSelectAnswer=function(t){var a=e.props,n=a.setScore,r=a.setAssertion,c=e.state,s=c.results[c.index].correct_answer;return document.querySelectorAll(".answer").forEach((function(e){e.classList.add("clicked")})),clearInterval(e.countDown),e.setState({isNextDisabled:!1,areAnswersDisabled:!0}),t===s&&r(1),n(t===s?e.calculateScore():0)},e.handleNextQuestion=function(){var t=e.state,a=t.index,n=t.results,r=e.props.history;clearInterval(e.countDown),clearTimeout(e.timeOut),a!==n.length-1?(e.setState({index:a+1,areAnswersDisabled:!1,isNextDisabled:!0,countdown:30}),e.countDown=e.createInterval(),e.timeOut=e.createTimeout()):r.push("/feedback")},e.requestQuestions=Object(S.a)(N.a.mark((function t(){var a,n,r,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.token,t.next=3,fetch("https://opentdb.com/api.php?amount=5&token=".concat(a));case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,.5,c=r.results.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{answers:[].concat(Object(b.a)(e.incorrect_answers),[e.correct_answer]).sort((function(){return Math.random()-.5}))})})),e.setState({results:c}),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)}))),e.createInterval=function(){return setInterval((function(){1===e.state.countdown&&clearInterval(e.countDown),e.setState((function(e){return{countdown:e.countdown-1}}))}),1e3)},e.createTimeout=function(){return setTimeout((function(){e.setState({areAnswersDisabled:!0,isNextDisabled:!1})}),3e4)},e.calculateScore=function(){var t=e.state,a=t.results,n=t.index,r=t.countdown,c=1;return"hard"===a[n].difficulty&&(c=3),"medium"===a[n].difficulty&&(c=2),10+r*c},e.renderQuestions=function(){var t=e.state,a=t.results,n=t.index,c=t.areAnswersDisabled,s=t.isNextDisabled,o=a[n],i=o.category,l=o.question,u=o.correct_answer,m=o.incorrect_answers,d=o.answers;return r.a.createElement("div",{className:"game-container"},r.a.createElement("h2",{"data-testid":"question-category"},i),r.a.createElement("p",{"data-testid":"question-text"},A.a.decode(l)),r.a.createElement("div",{"data-testid":"answer-options",className:"answers-list"},d.map((function(t){return r.a.createElement("button",{type:"button",key:t,disabled:c,onClick:function(){return e.handleSelectAnswer(t)},className:t===u?"answer correct":"answer wrong","data-testid":t===u?"correct-answer":"wrong-answer-".concat(m.indexOf(t))},A.a.decode(t))}))),!s&&r.a.createElement("button",{type:"button","data-testid":"btn-next",className:"btn-next",onClick:e.handleNextQuestion},"Next"))},e.state={results:[],index:0,countdown:30,areAnswersDisabled:!1,isNextDisabled:!0},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getToken,e.next=3,this.requestQuestions();case 3:if(a=e.sent,3,3!==a.response_code){e.next=9;break}return e.next=8,t();case 8:this.requestQuestions();case 9:this.countDown=this.createInterval(),this.timeOut=this.createTimeout();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.results,a=e.countdown;return r.a.createElement("div",null,r.a.createElement(k,{timer:a}),t.length?this.renderQuestions():"")}}]),a}(n.Component)),_=Object(o.b)((function(e){return{token:e.token}}),(function(e){return{getToken:function(){return e(C())},setScore:function(t){return e(function(e){return{type:"SET_PLAYER_SCORE",score:e}}(t))},setAssertion:function(t){return e(function(e){return{type:"SET_PLAYER_ASSERTION",hit:e}}(t))}}}))(T),R=a(22),I=a(31),P=(a(51),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).validateButton=function(){var t=e.state,a=t.name,n=t.email,r=/[a-zA-Z0-9._]+@[a-zA-Z]+\.[a-zA-Z.]*\w$/.test(n);e.setState({isButtonDisabled:!(r&&a)})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(R.a)({},n,r),e.validateButton)},e.handleClickSubmit=function(){var t=Object(S.a)(N.a.mark((function t(a){var n,r,c,s,o,i,l;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.getToken,c=n.history,s=n.dispatchPlayer,o=e.state,i=o.email,l=o.name,a.preventDefault(),t.next=5,r();case 5:s(l,i),c.push("/play");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSettingsBtnClick=function(){e.props.history.push("/config")},e.state={name:"",email:"",isButtonDisabled:!0},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.isButtonDisabled;return r.a.createElement("main",{className:"login-main"},r.a.createElement("form",null,r.a.createElement("img",{className:"blink",src:"./neon.svg",alt:""}),r.a.createElement("h1",null,"Login"),r.a.createElement("input",{type:"text",placeholder:"Nome",name:"name",value:t,"data-testid":"input-player-name",onChange:this.handleChange,maxLength:"30",required:!0}),r.a.createElement("input",{type:"email",placeholder:"E-mail",name:"email",value:a,"data-testid":"input-gravatar-email",onChange:this.handleChange,maxLength:"30",required:!0}),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("button",{className:n?"play-btn-disable":"play-btn-able",type:"submit","data-testid":"btn-play",disabled:n,onClick:this.handleClickSubmit},r.a.createElement(g.b,{className:"icon"})),r.a.createElement("button",{className:"settings-btn",type:"button","data-testid":"btn-settings",id:"setting",onClick:this.handleSettingsBtnClick},r.a.createElement(I.a,{className:"icon"})))))}}]),a}(n.Component)),q=Object(o.b)(null,(function(e){return{getToken:function(){return e(C())},dispatchPlayer:function(t,a){return e(D(t,a))}}}))(P),B=(a(52),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).ranking=JSON.parse(localStorage.getItem("ranking"))||[],e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",{className:"ranking-container"},r.a.createElement("div",{className:"ranking-header"},r.a.createElement("img",{src:"./neon.svg",alt:""}),r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking")),this.ranking.sort((function(e,t){return t.score-e.score})).map((function(e,t){return r.a.createElement("div",{className:"ranking-card",key:t},r.a.createElement("div",{className:"ranking-user"},r.a.createElement("img",{src:e.picture,alt:"",className:"img-gravatar"}),r.a.createElement("h4",{"data-testid":"player-name-".concat(t),className:"ranking-name"},e.name)),r.a.createElement("p",{"data-testid":"player-score-".concat(t),className:"ranking-score"},e.score))})),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){return e.push("/")},className:"play-again-btn"},r.a.createElement(g.b,null),"Play"))}}]),a}(n.Component));function L(){return r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:q,exact:!0}),r.a.createElement(l.a,{path:"/play",component:_}),r.a.createElement(l.a,{path:"/config",component:h}),r.a.createElement(l.a,{path:"/ranking",component:B}),r.a.createElement(l.a,{path:"/feedback",component:w}),r.a.createElement(l.a,{path:"/ranking",component:B}))}a(58);var Q=a(18),Y=a(33),J=a(34),M={name:"",assertions:0,score:0,gravatarEmail:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER_DATA":return Object(j.a)(Object(j.a)({},e),{},{name:t.name,gravatarEmail:t.gravatarEmail,score:0});case"SET_PLAYER_SCORE":return Object(j.a)(Object(j.a)({},e),{},{score:e.score+t.score});case"SET_PLAYER_ASSERTION":return Object(j.a)(Object(j.a)({},e),{},{assertions:e.assertions+t.hit});default:return e}},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOKEN":return t.token;default:return e}},Z=Object(Q.combineReducers)({player:W,token:z}),F=Object(Q.createStore)(Z,Object(Y.composeWithDevTools)(Object(Q.applyMiddleware)(J.a)));window.Cypress&&(window.store=F);var G=F;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(o.a,{store:G},r.a.createElement(i.a,null,r.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.d954be03.chunk.js.map